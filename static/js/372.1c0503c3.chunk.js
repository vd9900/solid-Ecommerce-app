"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[372],{1963:function(e,s,a){a.r(s),a.d(s,{default:function(){return k}});var l=a(9439),n=a(2791),r=a(5048),i=a(2426),t=a.n(i),d=a(4132),o=a(2529),m=a.p+"static/media/loadprofile.915a00cd078ec54e10a4.gif",c=a(2506),u=a(6727),x=a(661).f.injectEndpoints({endpoints:function(e){return{userInfo:e.query({query:function(e){return"api/vi/me/?email=".concat(e)},providesTags:["USER"]}),updateUserInfo:e.mutation({query:function(e){return{url:"api/vi/me/update",method:"PUT",body:e}},invalidatesTags:["USER"]}),uploadProfile:e.mutation({query:function(e){return{url:"api/vi/upload/profile",method:"PUT",body:e}}})}}}),f=x.useUserInfoQuery,p=x.useUpdateUserInfoMutation,h=x.useUploadProfileMutation,v=a(298),g=a(3239),j=a(9126),b=a(2765),y=a(9769),N=a(3329),w=u.Ry({email:u.Z_().email("Enter a valid email address").required("Add new  email"),username:u.Z_().required("Enter new username")}),k=function(){var e,s,a,i,u,x,k=(0,n.useState)(!1),C=(0,l.Z)(k,2),E=C[0],S=C[1],U=(0,v.fC)(),M=(0,r.I0)(),Y=f(U().email,{refetchOnMountOrArgChange:!0}),Z=Y.isLoading,A=Y.data,q=Y.isSuccess,D=Y.refetch,B=Y.isFetching,F=Y.isError,I=Y.error;F&&console.log(z),console.log(I);var L=p(),P=(0,l.Z)(L,2),R=P[0],T=P[1],z=(T.data,T.error),O=T.isLoading,_=T.isSuccess,H=h(),K=(0,l.Z)(H,2),Q=K[0],V=K[1],G=(V.data,V.isSuccess),J=V.isLoading,W=null===A||void 0===A?void 0:A.message;console.log("fetching",J);var X=(0,c.TA)({initialValues:{email:"",username:""},validateOnBlur:!0,onSubmit:function(e,s){R({username:e.username,email:e.email}),s.resetForm()},validationSchema:w});return(0,n.useEffect)((function(){_&&S(!1)}),[_]),(0,n.useEffect)((function(){G&&D()&&M((0,b.hn)(null===W||void 0===W?void 0:W.avatar))}),[G,q]),(0,n.useEffect)((function(){q&&M((0,b.hn)(null===W||void 0===W?void 0:W.avatar))}),[A]),(0,N.jsxs)("div",{className:" max-w-screen h-screen bg-gray-50",children:[(0,N.jsx)(d.Z,{}),Z?(0,N.jsx)(o.Z,{}):(0,N.jsx)("div",{className:"relative pt-16 sm:w-11/12 md:w-10/12 lg:w-9/12 sm:h-5/6 mx-auto flex justify-center sm:items-center",children:(0,N.jsxs)("div",{className:" sm:relative w-full md:10/12 lg:w-11/12 xl:w-10/12   sm:h-5/6 flex max-sm:flex-col shadow-md bg-white/80 py-4 rounded-md",children:[(0,N.jsx)(y.Z,{isOpen:E,onClose:function(){return S(!E)},className:"z-40",children:(0,N.jsxs)("form",{autoComplete:"",onSubmit:X.handleSubmit,className:" z-40 shadow-md flex flex-col duration-300  justify-between bg-gray-50 rounded-md py-2 gap-5  w-9/12  h-auto   absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"border-b py-2",children:(0,N.jsx)("p",{className:"px-3 font-serif  text-xl",children:"Edit profile"})}),(0,N.jsxs)("div",{className:"overflow-hidden px-4 flex flex-col gap-3",children:[(0,N.jsxs)("div",{className:"p-2",children:[(0,N.jsx)("p",{className:"text-lg py-1",children:"Username"}),(0,N.jsx)("input",{type:"text",className:"border bg-gray-100 outline-none py-1 w-full sm:w-6/12 px-3 rounded-sm ",name:"username",value:X.values.username,onChange:X.handleChange,onBlur:X.handleBlur}),(0,N.jsx)("p",{className:"text-red-600 text-sm",children:X.touched.username&&X.errors.username?X.errors.username:""})]}),(0,N.jsxs)("div",{className:"p-2",children:[(0,N.jsx)("p",{className:"text-lg py-1",children:"Email"}),(0,N.jsx)("input",{type:"text",className:"border bg-gray-100 outline-none py-1 w-full sm:w-6/12 px-3 rounded-sm ",name:"email",value:X.values.email,onChange:X.handleChange,onBlur:X.handleBlur}),(0,N.jsx)("p",{className:"text-red-600 text-sm",children:X.touched.email&&X.errors.email?X.errors.email:""})]})]})]}),(0,N.jsxs)("div",{className:"flex items-center justify-end gap-3 px-3",children:[(0,N.jsxs)("button",{className:" disabled:bg-black/90 h-8 bg-black text-white flex gap-2 items-center px-6 rounded-md py-1 ",disabled:O,type:"submit",children:[(0,N.jsx)(g.Z,{size:18,className:"",style:{color:"white",display:"".concat(O?"inline-block":"none")}}),O?null:(0,N.jsx)("span",{children:"Edit"})]}),(0,N.jsx)("button",{onClick:function(){S(!1),X.resetForm()},className:"border border-black  px-8 rounded-md py-1 ",type:"button",children:"cancel"})]})]})}),(0,N.jsxs)("div",{className:"sm:w-4/12 px-6 flex flex-col  items-center justify-evenly",children:[(0,N.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[B||J?(0,N.jsx)("div",{className:"overflow-hidden mx-auto  w-52 h-52 sm:w-40 sm:h-40 md:w-48 md:h-48 xl:h-64 xl:w-64 rounded-full animate-pulse bg-gray-100 flex items-center justify-center",children:(0,N.jsx)("img",{src:m,alt:"",className:"w-10"})}):(0,N.jsxs)("div",{className:"overflow-hidden mx-auto relative w-52 h-52 sm:w-40 sm:h-40 md:w-48 md:h-48 xl:h-64 xl:w-64 rounded-full",children:[(0,N.jsx)("img",{src:null===W||void 0===W||null===(e=W.avatar)||void 0===e?void 0:e.url,className:"mx-auto l object-cover",alt:""}),(0,N.jsx)("div",{className:"text-white absolute bottom-0 flex justify-end  bg-black/90   w-64 h-8",children:(0,N.jsxs)("label",{htmlFor:"file-upload",className:"custom-file-upload relative cursor-pointer",children:[(0,N.jsx)("span",{className:"  ",children:(0,N.jsx)(j.Kix,{fontSize:18,className:" text-white mt-1 mr-28"})}),(0,N.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",onChange:function(e){var s=new FileReader;s.readAsDataURL(e.target.files[0]),s.onloadend=function(){Q({image:s.result})}},className:"absolute w-full h-full opacity-0 overflow-hidden cursor-pointer"})]})})]}),(0,N.jsxs)("p",{className:"text-3xl py-2 mr-auto",children:[" ",null===A||void 0===A||null===(s=A.message)||void 0===s?void 0:s.username]})]}),(0,N.jsx)("button",{onClick:function(){return S(!0)},className:"py-1 max-sm:w-5/12 max-sm:ml-auto hover:text-white hover:bg-black duration-700 rounded-md font-medium w-full border border-black ",children:"Edit profile"})]}),(0,N.jsxs)("div",{className:"sm:w-8/12 md:pl-5 flex flex-col   ",children:[(0,N.jsx)("div",{className:"flex gap-4 py-2   px-10 border-b-2 border-r-gray-500",children:(0,N.jsx)("span",{className:"hidden sm:block cursor-pointer px-2 p font-medium border-b-4 border-gray-600 text-black/70 text-sm ",children:"About"})}),(0,N.jsxs)("div",{className:"flex sm:h-5/6 p-4  flex-col justify-around gap-2 ",children:[(0,N.jsxs)("div",{className:"border rounded-md p-4 flex flex-col gap-2 ",children:[(0,N.jsx)("p",{className:"text-gray-500 border-b-2 font-medium w-fit",children:"Personal Details"}),(0,N.jsxs)("span",{className:"",children:[(0,N.jsx)("p",{className:"text-sm  text-gray-700",children:"username"}),(0,N.jsx)("p",{className:"p-0 m-0 leading-4 font-medium  text-gray-800",children:null===A||void 0===A||null===(a=A.message)||void 0===a?void 0:a.username})]}),(0,N.jsxs)("span",{className:"",children:[(0,N.jsx)("p",{className:"text-sm  text-gray-700",children:"email"}),(0,N.jsx)("p",{className:"p-0 m-0 leading-4 font-medium  text-gray-800",children:null===A||void 0===A||null===(i=A.message)||void 0===i?void 0:i.email})]})]}),(0,N.jsxs)("div",{className:"border rounded-md p-4 flex flex-col gap-2 ",children:[(0,N.jsx)("p",{className:"text-gray-500 border-b-2 font-medium w-fit",children:"Histroy"}),(0,N.jsxs)("span",{className:"",children:[(0,N.jsx)("p",{className:"text-sm p-0 text-gray-700",children:"Last updated"}),(0,N.jsx)("p",{className:"p-0 m-0 leading-4 font-medium font-mono text-gray-800",children:t()(null===A||void 0===A||null===(u=A.message)||void 0===u?void 0:u.updatedAt).format("DD MMM YYYY h:mma")})]}),(0,N.jsxs)("span",{className:"",children:[(0,N.jsx)("p",{className:"text-sm p-0 text-gray-700",children:"joined"}),(0,N.jsx)("p",{className:"p-0 m-0 leading-4 font-medium font-mono text-gray-800",children:t()(null===A||void 0===A||null===(x=A.message)||void 0===x?void 0:x.createdAt).format("DD MMMM YYYYY h:mma")})]})]})]})]})]})})]})}}}]);
//# sourceMappingURL=372.1c0503c3.chunk.js.map